<!DOCTYPE html>
<html class="no-js" lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titre }}</title>
    <link rel="stylesheet" href="/css/foundation.css">
    <link rel="stylesheet" href="/css/app.css">
  </head>
  <body>
	<div class="grid-container grid-container-padded">
	   <div class="grid-x">
		<div class=" small-6 medium-4 large-4">
		<p>Merci de choisir une catégorie parmi la liste : </p>
		<select onchange="selectionCategorie(this.value);">
		  {% for categorie in categories %}
		   <option name="{{ categorie.type}}" value="{{ categorie.type}}">{{ categorie.type}}</option>
		  {% endfor %}
	    </select>
		</div>
	   </div>
	</div>


  <div class="grid-container grid-container-padded">
    <div class="grid-x">
	  <div id="resultatAjax" class="cell"></div>
	</div>
  </div>

<br /><br />
{# <div class="product-card">
  <div class="product-card-thumbnail">
    <a href="#"><img src="https://placehold.it/180x180"/></a>
  </div>
  <h2 class="product-card-title"><a href="#">Product Name</a></h2>
  <span class="product-card-desc">Product Description</span>
  <span class="product-card-price">$9.99</span><span class="product-card-sale">$12.99</span>
  <div class="product-card-colors">
    <button href="#" class="product-card-color-option"><img src="https://placehold.it/30x30"/></button>
    <button href="#" class="product-card-color-option"><img src="https://placehold.it/30x30"/></button>
    <button href="#" class="product-card-color-option"><img src="https://placehold.it/30x30"/></button>
    <button href="#" class="product-card-color-option"><img src="https://placehold.it/30x30"/></button>
  </div>
</div> #}

    <script src="/js/jquery.js"></script>
    <script src="/js/what-input.js"></script>
    <script src="/js/foundation.js"></script>
    <script src="/js/app.js"></script>

	<script>
	  function selectionCategorie(categorie)
	  {
		 var data, url;

		 console.log(categorie);
		 if (categorie == null) { categorie="aucune";};

		 data={"categorieSelectionnee": categorie};
		 url="{{ path('carteMenu')}}";

		 $.ajax({
				  type: 'POST',
				  url: url,
				  data: data,
				  dataType: 'json',
				  timeout: 3000,
				  success: function(response)
					  {
						console.log($(response.resultat).toArray().length);
						console.log(response.resultat['0']);
					  },
				  error: function()
					  { $("#resultatAjax").html("<div class=\"callout alert\">\n\
												  <p style='color:#85090B;'>\n\
												  <b>Ooups !</b> \n\
												   La catégorie n'existe pas.</p>\n\
												  </div>");
					  }
				});

	  }
	</script>
  </body>
</html>
